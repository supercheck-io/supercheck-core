# Environment variables for Supercheck
# Copy this file to .env and update the values

# =============================================================================
# SECURITY CONFIGURATION - REQUIRED FOR PRODUCTION
# =============================================================================

# Better Auth Secret - REQUIRED for production (generate with: openssl rand -hex 32)
BETTER_AUTH_SECRET=your-super-secret-key-change-this-in-production

# Credential & Variable Encryption Keys - REQUIRED for production
# Generate with: openssl rand -hex 32
CREDENTIAL_ENCRYPTION_KEY=your-credential-encryption-key-change-this-in-production
VARIABLES_ENCRYPTION_KEY=your-64-character-encryption-key-for-variable-secrets-change-this-in-prod

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database Configuration
DB_HOST=postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=supercheck
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/supercheck

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Configuration for job queues
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=supersecure-redis-password-change-this
REDIS_URL=redis://:supersecure-redis-password-change-this@redis:6379

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# App URLs
NEXT_PUBLIC_APP_URL=http://localhost:3000
BETTER_AUTH_URL=http://localhost:3000
NODE_ENV=development

# Capacity and Timeout Configuration
RUNNING_CAPACITY=5
QUEUED_CAPACITY=50
TEST_EXECUTION_TIMEOUT_MS=120000
JOB_EXECUTION_TIMEOUT_MS=900000

# Demo Mode Configuration
NEXT_PUBLIC_DEMO_MODE=false

# Notification Channel Limits
NEXT_PUBLIC_MAX_JOB_NOTIFICATION_CHANNELS=10
NEXT_PUBLIC_MAX_MONITOR_NOTIFICATION_CHANNELS=10

# Monitor Configuration
RECENT_MONITOR_RESULTS_LIMIT=10000

# =============================================================================
# AWS S3 / MINIO CONFIGURATION
# =============================================================================

# MinIO/S3 Configuration
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin

# S3 Storage Configuration
S3_ENDPOINT=http://minio:9000
S3_JOB_BUCKET_NAME=playwright-job-artifacts
S3_TEST_BUCKET_NAME=playwright-test-artifacts
S3_FORCE_PATH_STYLE=true
S3_OPERATION_TIMEOUT=10000
S3_MAX_RETRIES=3

# =============================================================================
# PLAYWRIGHT CONFIGURATION
# =============================================================================

# Playwright Artifact Configuration
# Control what artifacts are collected during test execution
# Options: 'on', 'off', 'retain-on-failure', 'only-on-failure'
PLAYWRIGHT_HEADLESS=true
PLAYWRIGHT_RETRIES=1
PLAYWRIGHT_TRACE=on
PLAYWRIGHT_SCREENSHOT=on
PLAYWRIGHT_VIDEO=on

# Browser Support (disabled by default for performance)
ENABLE_FIREFOX=false
ENABLE_WEBKIT=false
ENABLE_MOBILE=false

# =============================================================================
# CLEANUP CONFIGURATION
# =============================================================================

# Playground Cleanup Configuration
PLAYGROUND_CLEANUP_ENABLED=true
PLAYGROUND_CLEANUP_CRON="0 */12 * * *"
PLAYGROUND_CLEANUP_MAX_AGE_HOURS=24

# =============================================================================
# EMAIL CONFIGURATION FOR NOTIFICATIONS
# =============================================================================

# SMTP Configuration - Can use any SMTP provider including Resend's SMTP
# Examples:
# - Gmail: smtp.gmail.com (use App Password with 2FA enabled)
# - Resend SMTP: smtp.resend.com (use API key as password)
# - SendGrid: smtp.sendgrid.net
# - Amazon SES: email-smtp.region.amazonaws.com

SMTP_HOST=smtp.resend.com
SMTP_PORT=587
SMTP_USER=resend
SMTP_PASSWORD=your-smtp-password-change-this-in-production
SMTP_SECURE=false
SMTP_FROM_EMAIL=notification@supercheck.io

# =============================================================================
# AI FIX FEATURE CONFIGURATION (OPTIONAL)
# =============================================================================

# Enable/disable the AI-powered test fix functionality
NEXT_PUBLIC_AI_FIX_ENABLED=false

# AI Provider Configuration
# Only OpenAI is supported
AI_PROVIDER=openai

# AI Model Configuration
# Supported OpenAI models: gpt-4o, gpt-4o-mini (recommended), gpt-4-turbo, gpt-3.5-turbo
AI_MODEL=gpt-4o

# API Keys (required if AI fix is enabled)
OPENAI_API_KEY=your-openai-api-key-here

# =============================================================================
# ADMIN CONFIGURATION
# =============================================================================

# Better Auth Admin Configuration
SUPER_ADMIN_EMAILS=super.admin@example.com
MAX_PROJECTS_PER_ORG=10
DEFAULT_PROJECT_NAME="Default Project"

# =============================================================================
# PRODUCTION-SPECIFIC CONFIGURATION (for docker-compose-secure.yml)
# =============================================================================

# Domain and SSL Configuration (for production with Traefik)
APP_DOMAIN=app.example.com
ACME_EMAIL=hello@example.com

# =============================================================================
# SECURITY BEST PRACTICES
# =============================================================================

# 1. Generate strong, unique secrets for production:
#    - Use: openssl rand -hex 32
#    - Never use default values in production
#
# 2. Store secrets securely:
#    - Use environment variables or secret management systems
#    - Never commit secrets to version control
#    - Rotate secrets regularly
#
# 3. Database security:
#    - Use strong, unique passwords
#    - Limit database user permissions
#    - Enable SSL/TLS for database connections in production
#
# 4. Redis security:
#    - Always set a strong Redis password
#    - Disable dangerous Redis commands in production
#    - Use Redis ACLs for fine-grained access control
#
# 5. MinIO/S3 security:
#    - Use IAM roles and policies in production
#    - Enable bucket versioning and encryption
#    - Regularly audit access logs